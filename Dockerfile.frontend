# ══════════════════════════════════════════════════════════════
# S2-Sentinel Copilot — Frontend Dockerfile
# Nginx serving static SPA (HTML/CSS/JS)
# ══════════════════════════════════════════════════════════════

FROM nginx:1.25-alpine

LABEL maintainer="Muhammad Izaz Haider <mizazhaiderceh@gmail.com>"
LABEL description="S2-Sentinel Copilot Frontend"

# Remove default nginx content
RUN rm -rf /usr/share/nginx/html/*

# Copy custom nginx config
COPY docker/nginx.conf /etc/nginx/conf.d/default.conf

# Copy frontend assets (everything except server/)
COPY index.html      /usr/share/nginx/html/
COPY manifest.json   /usr/share/nginx/html/
COPY css/            /usr/share/nginx/html/css/
COPY js/             /usr/share/nginx/html/js/
COPY images/         /usr/share/nginx/html/images/

# Security headers are set in nginx.conf

EXPOSE 80

HEALTHCHECK --interval=30s --timeout=5s --retries=3 \
    CMD wget -qO- http://localhost/health || exit 1

CMD ["nginx", "-g", "daemon off;"]
